# Пульт охраны банка

Пульт охраны - это сайт, что работает напрямую с базой данных. Здесь представлены примеры запросов к базе данных: 

1. Получение всех активных пропусков.

   - Отображение их кликабельных имен (2 пункт), код пропуска, и дату регистрации карты.
   
2. Получение информации по пропуску человека.

   - Отображение всех посещений пользователя, включающих в себя: время посещения, продолжительность и подозрительность визита.

   - Подозрительность визита формируется засчет продолжительности визита, если она больше часа, то в этой колонке отображается Truе.
   
3. Получение информации по активным пользователям.

   - Отображение активного пользователя, его имени, времени захода и продолжительность нахождения.

Запустить данный проект просто так не получится, для работы с ним потребуются [переменные окружения](https://github.com/Ou7ro/django_orm_watching_storage_master#Переменныеокружения)

## Зависимости

- Python3.10 должен быть уже установлен. 

[С версиями выше, Django3.2.25 не совместим](https://docs.djangoproject.com/en/4.0/faq/install/#what-python-version-can-i-use-with-django)

- Затем используйте `pip` для установки зависимостей:

```
pip install -r requirements.txt
```

## Переменные окружения

Для коректной работы, требуется подключить PostgreSQL к Django. Для этого:

1. Расположите файл `.env` в папку \django_orm_watching_storage_master\project.
2. `.env` должен содержать следующие настройки необходимые для работы базы данных.
Пример содержимого `.env`:
```
DB_ENGINE = django.db.backends.postgresql_psycopg2 
DB_HOST = 127.0.0.1
DB_PORT = 5432
DB_NAME = mydatabase
DB_USER = mydatabaseuser
DB_PASSWORD = mypassword

DJANGO_SECRET_KEY = django_secret_key
ALLOWED_HOSTS = host_1, host_2
DEBUG = True
```
Где:

- DB_ENGINE - Отвечает за то, где Django хранит данные сеанса.
- DB_HOST - хост для подключения к базе данных. (В случае локальной настройки - localhost)
- DB_PORT - Порт, который используется при подключении к базе данных.
- DB_NAME - Имя используемой базы данных. 
- DB_USER - Имя пользователя, которое используется при подключении к базе данных.
- DB_PASSWORD - Пароль, который используется при подключении к базе данных.
- ALLOWED_HOSTS - Список из имен хостов/доменов, которые может обслуживать этот сайт Django. Необязательная переменная, по умолчанию стоит - '*'.
- DEBUG - Логическое значение, которое включает/выключает режим отладки. Необязательная переменная, по умолчанию стоит - False.

Более подробно про настройки [Здесь](https://docs.djangoproject.com/en/5.1/ref/settings/#std-setting-HOST)

- DJANGO_SECRET_KEY - Секретный ключ для конкретной установки Django. Он используется для криптографической подписи и должен иметь уникальное, непредсказуемое значение.

Более подробно про секретный ключ рассказывается [здесь](https://blog.ovalerio.net/archives/995) и [здесь.](https://docs.djangoproject.com/en/dev/topics/signing/)

## Запуск

Запустите сайт на локальном сервере следующей консольной командой:
```
python manage.py runserver
```

### Выходные данные

В случае правильного использования вывод в консоль будет следующим:
```
System check identified no issues (0 silenced).
March 03, 2025 - 22:43:56
Django version 3.2.25, using settings 'project.settings'
Starting development server at http://127.0.0.1:8000/
Quit the server with CTRL-BREAK.
```

### Выключение локального сервера

Чтобы завершить работу с локальным сервером находясь в терминале прожмите сочетание клавиш ```Ctrl + C ```.
